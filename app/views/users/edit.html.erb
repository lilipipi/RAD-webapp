<%provide(:title,"Edit user")%>
<% provide(:button_text, 'Save changes')%>
<h1>Update your profile</h1>
<div class="row">
  <div class="col-md-2 col-xs-2">
    <div class="panel" style="background-color: #222; padding-bottom:  230px;">
      <ul role="navigation" class="nav nav-pills nav-stacked" style="max-width: 250px;" id="sidebar">
        <li>
          <%= link_to current_user , class:"nav-link" do %>
          <span class="glyphicon glyphicon-send" aria-hidden="true"></span> My profile
          <% end %>
        </li>
        <li>
         <%= link_to "My Post", current_user %>
        </li>
        <li>
          <%= link_to "My comments", current_user %>
        </li>
        <li>
          <a href="#"> <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span> <%= link_to "Comments to me", my_comments_path %> </a>
        </li>
        <li class="active">
          <a href="#"> <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> My Setting</a>
        </li>
      </ul>
    </div>
  </div>
  
  <div class="col-md-10">
    <div class="panel panel-default">
      <div class="panel panel-body">
        <ul class="nav nav-tabs">
          <li role="presentation" class="active"><a data-toggle="tab" href="#home">Personal Info</a></li>
          <li role="presentation"><a data-toggle="tab" href="#avatar">Avatar</a></li>
          <li role="presentation"><a data-toggle="tab" href="#password">Password</a></li>
          <li role="presentation"><a data-toggle="tab" href="#verification">Verification</a></li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div role="tabpanel" class="tab-pane fade in active" id="home">
            <div class="col-md-6" style="margin-top: 20px; ">
              <%= form_for(@user) do |f|%>
              <%= render 'shared/error_messages', object: f.object %>

              <%= f.label :name %>
              <%= f.text_field :name, class: 'form-control'%>

              <%= f.label :email %>
              <%= f.email_field :email , class: 'form-control' %>

              <%= f.label :password %>
              <%= f.password_field :password, class: 'form-control' %>

              <%= f.label :password_confirmation %>
              <%= f.password_field :password_confirmation, class: 'form-control' %>

              <%= f.submit 'Confirm', class: "btn btn-primary" %>
              <% end %>
            </div>
          </div>

          <div class="tab-pane fade" id="avatar" role="tabpanel">
            <div class="col-md-6" style="margin-top: 20px;">
              <% if @user.avatar? %>
              <%= image_tag(@user.avatar.url, size: "400") %>
              <% else %>
              <%= gravatar_for @user %>
              <% end %>
              <%= form_for(@user) do |f| %> 
              <%= render'shared/error_messages'%>
              <%= f.file_field :avatar %>
              <%= f.submit "Confirm", class:"btn btn-primary"%>
              <%end%>
              <a class="btn btn-primary m-2" href="http://gravatar.com/emails">Change</a>
            </div>
          </div>
          <div class="tab-pane fade" id="password" role="password">
            <div class="col-md-6" style="margin-top: 20px;">
              <%= form_for(@user) do |f| %> <%= render'shared/error_messages'%>
              <%= f.label:password %>
              <%= f.password_field:password, class:"form-control" %>
              <%= f.label:password_confirmation, "Confirm Password" %>
              <%= f.password_field:password_confirmation,class:"form-control" %>
              <%= f.submit "Confirm", class:"btn btn-primary"%>
              <%end%>
            </div>
          </div>

          <div class="tab-pane fade" id="verification" role="tabpanel" aria-labelledby="verify-tab">
            <div class="col-md-6">
              <%= image_tag(@user.card.url, size: "400") if @user.card? %>
              <form>
                <div class="form-group" style="margin-top: 20px;">
                  <label for="name">Name on the Card</label>
                  <input type="name" class="form-control" id="name">
                </div>
                <div class="form-group">
                  <label for="number">Card Number</label>
                  <input type="password" class="form-control" id="number">
                </div>
                <div class="form-group">
                  <label>Example file input</label>
                  <input type="file">
                </div>
            </div>
            <%= form_for(@user) do |f| %> <%= render'shared/error_messages'%>
              <% f.file_field :card %>
              <%= f.submit "Confirm", class:"btn
                btn-primary"%>
              <%end%>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script type = "text/javascript">
  $('#micropost_picture').bind('change', function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('Maximum file size is 5MB. Please choose a smaller file.');
    }
  });
</script>